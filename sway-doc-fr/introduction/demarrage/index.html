<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>D√©marrage - Sway üå¥ - Version FR</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "D\u00e9marrage";
        var mkdocs_page_input_path = "introduction/demarrage.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Sway üå¥ - Version FR
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Accueil</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Introduction</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../introduction/">Introduction</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">D√©marrage</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#glossaire">Glossaire</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#comprendre-les-types-de-programmes-sway">Comprendre les types de programmes Sway</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#votre-premier-projet-sway">Votre premier projet Sway</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#ecrire-le-contrat">√âcrire le contrat</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#abi">ABI</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#aller-ligne-par-ligne">Aller ligne par ligne</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#implement-abi">Implement ABI</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ce-que-nous-venons-de-faire">Ce que nous venons de faire</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#construire-le-contrat">Construire le contrat</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#deployer-le-contrat">D√©ployer le contrat</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#faite-tourner-votre-noeud-fuel">Faite tourner votre noeud Fuel</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#deployer-counter_contract-vers-votre-noeud-fuel-local">D√©ployer counter_contract vers votre noeud Fuel local</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#test-de-votre-contrat">Test de votre contrat</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../toolchainFuel/">La toolchain Fuel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../forcProject/">Mon premier projet</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/counter/">Counter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/subcurrency/">Subcurrency</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/fizzbuzz/">Fizzbuzz</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/wallet-smart-contract/">Wallet Smart Contract</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Sway üå¥ - Version FR</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Introduction &raquo;</li>
      <li>D√©marrage</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="demarrage"><a href="#getting-started">D√©marrage</a></h1>
<p>Suivez ce guide pour √©crire, tester et d√©ployer un contrat intelligent simple dans Sway.</p>
<h2 id="glossaire"><a href="#glossary">Glossaire</a></h2>
<p>Avant de commencer, il peut √™tre utile de comprendre la terminologie qui sera utilis√©e tout au long de la documentation et la fa√ßon dont elle se rapporte les uns aux autres :</p>
<ul>
<li><strong>Fuel</strong> : la blockchain Fuel.</li>
<li><strong>FuelVM</strong> : la machine virtuelle qui alimente Fuel.
<strong>Sway</strong> : le langage sp√©cifique au domaine con√ßu pour la FuelVM ; il est inspir√© de Rust.
<strong>Forc</strong> : le syst√®me de construction et le gestionnaire de paquets pour Sway, similaire √† Cargo pour Rust.</li>
</ul>
<h2 id="comprendre-les-types-de-programmes-sway"><a href="#understand-sway-program-types">Comprendre les types de programmes Sway</a></h2>
<p>Il existe quatre types de programmes Sway :</p>
<ul>
<li><code>contrat</code></li>
<li><code>predicate</code></li>
<li><code>script</code></li>
<li><code>library</code> (biblioth√®que)</li>
</ul>
<p>Les contrats, pr√©dicats et scripts peuvent produire des artefacts utilisables sur la blockchain, tandis qu'une biblioth√®que est simplement un projet con√ßu pour la r√©utilisation du code et n'est pas directement d√©ployable.</p>
<p>Voir <a href="../sway-program-types/index.html">le chapitre sur les types de programmes</a> pour plus d'informations.</p>
<h2 id="votre-premier-projet-sway"><a href="#votre-premier-projet-sway">Votre premier projet Sway</a></h2>
<p>Nous allons construire un contrat de compteur simple avec deux fonctions : une pour incr√©menter le compteur, et une pour retourner la valeur du compteur.</p>
<p>Quelques informations qui seront utiles avant de continuer :</p>
<ul>
<li>Les principales caract√©ristiques d'un contrat intelligent qui le diff√©rencient des scripts ou des pr√©dicats sont qu'il est appelable et avec √©tat.</li>
<li>Un script est un bytecode ex√©cutable sur la cha√Æne qui peut appeler des contrats pour effectuer une t√¢che. Il ne repr√©sente pas la propri√©t√© d'une ressource et ne peut pas √™tre appel√© par un contrat.</li>
</ul>
<h3 id="ecrire-le-contrat"><a href="#writing-the-contract">√âcrire le contrat</a></h3>
<p>Tout d'abord, <a href="./installation.html">installons la toolchain Sway</a>. Puis, avec <code>forc</code> install√©, cr√©ons un projet de contrat :</p>
<pre><code>forc new counter_contract
</code></pre>
<p>Voici le projet que Forc a initialis√© :</p>
<pre><code>$ cd counter_contract
$ tree .
‚îú‚îÄ‚îÄ‚îÄ Cargo.toml
‚îú‚îÄ‚îÄ Forc.toml
‚îú‚îÄ‚îÄ‚îÄ src
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ main.sw
‚îî‚îÄ‚îÄ‚îÄ tests
    ‚îî‚îÄ‚îÄ‚îÄ harness.rs
</code></pre>
<p><code>Forc.toml</code> est le <em>fichier de manifeste</em> (similaire √† <code>Cargo.toml</code> pour Cargo ou <code>package.json</code> pour Node), et d√©finit les m√©tadonn√©es du projet telles que le nom du projet et les d√©pendances.</p>
<p>Nous allons √©crire notre code dans le dossier <code>src/main.sw</code>.</p>
<p>Changez de r√©pertoire dans votre projet de contrat et supprimez le code passe-partout dans <code>src/main.sw</code>. Chaque fichier Sway doit commencer par une d√©claration du type de programme qu'il contient ; ici, nous avons d√©clar√© que ce fichier est un contrat.</p>
<pre><code>contrat ;
</code></pre>
<p>Ensuite, nous allons d√©finir une valeur de stockage. Dans notre cas, nous avons un seul compteur que nous appellerons <code>counter</code> de type 64-bit unsigned integer et l'initialiserons √† 0.</p>
<pre><code>storage {
    compteur : u64 = 0,
}
</code></pre>
<h3 id="abi"><a href="#abi">ABI</a></h3>
<p>Une ABI d√©finit une interface, et il n'y a pas de corps de fonction dans l'ABI. Un contrat doit soit d√©finir, soit importer une d√©claration ABI et l'impl√©menter. Il est consid√©r√© comme une bonne pratique de d√©finir votre ABI dans une biblioth√®que s√©par√©e et de l'importer dans votre contrat car cela permet aux appelants du contrat d'importer et d'utiliser l'ABI dans des scripts pour appeler votre contrat.</p>
<p>Pour plus de simplicit√©, nous allons d√©finir l'ABI de mani√®re native dans le contrat.</p>
<pre><code>abi Counter {
    #[stockage(read, write)]
    fn increment() ;

    #[stockage(lecture)]
    fn counter() -&gt; u64 ;
}
</code></pre>
<h3 id="aller-ligne-par-ligne"><a href="#going-line-by-line">Aller ligne par ligne</a></h3>
<p><code>#[storage(read, write)]</code> est une annotation qui indique que cette fonction a la permission de lire et d'√©crire une valeur dans le stockage.</p>
<p><code>fn increment()</code> - Nous introduisons la fonctionnalit√© d'incr√©mentation et indiquons qu'elle ne doit pas retourner de valeur.</p>
<p><code>#[storage(read)]</code> est une annotation qui indique que cette fonction a la permission de lire des valeurs dans le stockage.</p>
<p><code>fn counter() -&gt; u64;</code> - Nous introduisons la fonctionnalit√© d'incr√©mentation du compteur et indiquons la valeur de retour de la fonction.</p>
<h3 id="implement-abi"><a href="#implement-abi">Implement ABI</a></h3>
<p>Sous la d√©finition de votre ABI, vous √©crirez l'impl√©mentation des fonctions d√©finies dans votre ABI.</p>
<pre><code>impl Compteur pour Contrat {
    #[stockage(read)]
    fn counter() -&gt; u64 {
      return storage.counter ;
    }
    #[stockage(read, write)]
    fn increment() {
        storage.counter = storage.counter + 1 ;
    }
}
</code></pre>
<blockquote>
<p><strong>Note</strong> <code>return storage.counter;</code> est √©quivalent √† <code>storage.counter</code>.</p>
</blockquote>
<h3 id="ce-que-nous-venons-de-faire"><a href="#what-we-just-did">Ce que nous venons de faire</a></h3>
<p>Lire et retourner la valeur de la propri√©t√© counter du stockage du contrat.</p>
<pre><code>fn counter() -&gt; u64 {
    retourne storage.counter ;
}
</code></pre>
<p>Le corps de la fonction acc√®de √† la valeur du compteur dans le stockage, et incr√©mente la valeur de un. Ensuite, nous retournons la nouvelle valeur mise √† jour du compteur.</p>
<pre><code>fn increment() {
    storage.counter = storage.counter + 1 ;
}
</code></pre>
<h3 id="construire-le-contrat"><a href="#build-the-contract">Construire le contrat</a></h3>
<p>Construisez <code>counter_contract</code> en ex√©cutant la commande suivante dans votre terminal depuis le r√©pertoire <code>counter_contract</code> :</p>
<pre><code>forc build
</code></pre>
<p>Vous devriez voir quelque chose comme cette sortie :</p>
<pre><code>Biblioth√®que compil√©e "core".
  Biblioth√®que compil√©e "std".
  Contrat compil√© "counter_contract".
  La taille du bytecode est de 224 octets.
</code></pre>
<h3 id="deployer-le-contrat"><a href="#deployer-le-contrat">D√©ployer le contrat</a></h3>
<p>Il est maintenant temps de d√©ployer le contrat et de l'appeler sur un n≈ìud Fuel. Nous allons montrer comment le faire en utilisant <code>forc</code> en ligne de commande, mais vous pouvez aussi le faire en utilisant le <a href="https://fuellabs.github.io/fuels-rs/master/getting-started/contracts.html">Rust SDK</a> ou le <a href="https://fuellabs.github.io/fuels-ts/#deploying-contracts">TypeScript SDK</a>.</p>
<h3 id="faite-tourner-votre-noeud-fuel"><a href="#spin-up-a-fuel-node">Faite tourner votre noeud Fuel</a></h3>
<p>Dans un onglet s√©par√© de votre terminal, cr√©ez un n≈ìud Fuel local :</p>
<pre><code>fuel-core run --db-type in-memory
</code></pre>
<p>Ceci d√©marre un noeud Fuel avec une base de donn√©es volatile qui sera effac√©e √† l'arr√™t (bon pour les tests).</p>
<h3 id="deployer-counter_contract-vers-votre-noeud-fuel-local"><a href="#deploy-counter_contract-to-your-local-fuel-node">D√©ployer <code>counter_contract</code> vers votre noeud Fuel local</a></h3>
<p>Pour d√©ployer <code>counter_contract</code> sur votre noeud Fuel local, ouvrez un nouvel onglet de terminal et ex√©cutez la commande suivante depuis la racine du r√©pertoire <code>wallet_contract</code> :</p>
<pre><code>forc deploy --unsigned
</code></pre>
<p><strong>Note</strong> Vous ne pouvez pas utiliser la m√™me session de terminal qui ex√©cute fuel-core pour ex√©cuter d'autres commandes car cela mettrait fin √† votre processus fuel-core.</p>
<p>Ceci devrait produire une sortie dans <code>stdout</code> qui ressemble √† ceci :</p>
<pre><code>$ forc deploy --unsigned
  Biblioth√®que compil√©e "core".
  Biblioth√®que compil√©e "std".
  Contrat compil√© "counter_contract".
  La taille du bytecode est de 224 octets.
Contract id: 0xaf94c0a707756caae667ee43ca18bace441b25998c668010192444a19674dc4f
Journaux :
TransactionId(HexFormatted(7cef24ea33513733ab78c5daa5328d622d4b38187d0f0d1857b272090d99f96a))
</code></pre>
<p>Notez l'identifiant du contrat - vous en aurez besoin si vous voulez construire un frontend pour interagir avec ce contrat.</p>
<h2 id="test-de-votre-contrat"><a href="#testing-your-contract">Test de votre contrat</a></h2>
<p>Dans le r√©pertoire <code>tests</code>, naviguez jusqu'√† <code>harness.rs.</code> Ici vous verrez qu'il y a un peu de code passe-partout pour vous aider √† commencer √† interagir avec et √† tester votre contrat.</p>
<p>Au bas du fichier, d√©finissez le corps de <code>can_get_contract_instance</code>. Voici √† quoi devrait ressembler votre code pour v√©rifier que la valeur du compteur a bien √©t√© incr√©ment√©e :</p>
<pre><code>#[tokio::test]
async fn can_get_contract_instance() {
    // Incr√©mente le compteur
    let _result = instance.increment().call().await.unwrap() ;

    // R√©cup√®re la valeur actuelle du compteur
    let result = instance.counter().call().await.unwrap() ;
    assert !(result.value &gt; 0) ;
}
</code></pre>
<p>Ex√©cutez la commande suivante dans le terminal : <code>forc test</code>.</p>
<p>Vous verrez quelque chose comme ceci dans votre sortie :</p>
<pre><code>  Biblioth√®que compil√©e "core".
  Biblioth√®que compil√©e "std".
  Contrat compil√© "counter_contract".
  La taille du bytecode est de 224 octets.
   Compilation de counter_contract v0.1.0 (&lt;path/to/counter_contract&gt;)
    Termin√© test [unoptimized + debuginfo] cible(s) en 4.55s
     Ex√©cution de tests/harness.rs (target/debug/deps/integration_tests-7a2922c770587b45)

Ex√©cution de 1 test
test can_get_contract_id ... ok

R√©sultat du test : ok. 1 r√©ussi ; 0 √©chou√© ; 0 ignor√© ; 0 mesur√© ; 0 filtr√© ; termin√© en 0.09s
</code></pre>
<p>F√©licitations, vous venez de cr√©er et de tester votre premier contrat intelligent Sway üéâ. Vous pouvez maintenant construire un frontend pour interagir avec votre contrat en utilisant le SDK TypeScript. Vous pouvez trouver un guide √©tape par √©tape pour construire un front-end pour votre projet <a href="https://fuellabs.github.io/fuels-ts/QUICKSTART.html">ici</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../introduction/" class="btn btn-neutral float-left" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../installation/" class="btn btn-neutral float-right" title="Installation">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../introduction/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../installation/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
